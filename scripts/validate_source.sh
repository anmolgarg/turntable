####################################################################################################
# RUN PYLINT AND NOSETESTS
####################################################################################################
DEV_PATH="$( cd "$( dirname "${BASH_SOURCE[0]}" )"/../.. && pwd )"

#...................................................................................................
# CONFIGURATION 
#...................................................................................................
REPO="${DEV_PATH}/turntable/turntable " 
LOG_FILE=${DEV_PATH}/turntable/scripts/scratch/source_validation.log
echo "> TESTING FROM $REPO"

#...................................................................................................
# SETUP 
#...................................................................................................
rm -f $LOG_FILE
function log {
	echo $1 | tee -a $LOG_FILE
}
cd ${DEV_PATH}/turntable # do this to find .coveragerc


#...................................................................................................
# VALIDATION
#...................................................................................................
log ">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"
log "VALIDATING SOURCE" 
log ">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"
log "RUNNING PYLINT ON ${REPO}" 
pylint --rcfile=pylintrc ${REPO} | tee -a ${LOG_FILE} 
log "RUNNING NOSETESTS ON ${REPO} " 
nosetests -v --with-coverage --cover-erase --cover-inclusive\
          --cover-package=${REPO} ${REPO} 2>&1 | tee -a ${LOG_FILE} 

#...................................................................................................
# TEARDOWN
#...................................................................................................
cd -
